bundle: operators-ontology
variables:
  name: "operators-ontology"
  version: "X.x.x"
  input: "."
  rdf-toolkit: "{input}/tools/serializer/rdf-toolkit.jar"
  output: "{name}{version}_release"
tools:
- name: "serializer"
  type: "Java"
  jar: "{rdf-toolkit}"
  arguments:
    - "-sfmt"
    - "turtle"
    - "-tfmt"
    - "turtle"
    - "-sdt"
    - "explicit"
    - "-dtd"
    - "-sni"
    - "-ibn"
    - "-s"
    - "{inputFile}"
    - "-t"
    - "{outputFile}"
- name: "xml-serializer"
  type: "Java"
  jar: "{rdf-toolkit}"
  arguments:
    - "-sfmt"
    - "turtle"
    - "-tfmt"
    - "rdf-xml"
    - "-sdt"
    - "explicit"
    - "-dtd"
    - "-sni"
    - "-ibn"
    - "-s"
    - "{inputFile}"
    - "-t"
    - "{outputFile}"
- name: "json-serializer"
  type: "Java"
  jar: "{rdf-toolkit}"
  arguments:
    - "-sfmt"
    - "turtle"
    - "-tfmt"
    - "json-ld"
    - "-sdt"
    - "explicit"
    - "-dtd"
    - "-sni"
    - "-ibn"
    - "-s"
    - "{inputFile}"
    - "-t"
    - "{outputFile}"
actions:
- action: "mkdir"
  directory: "{output}"
- action: "copy"
  message: "Substituting version numbers."
  source: "{input}"
  target: "{output}"
  replace:
    from: "X.x.x"
    to: "{version}"
  rename:
    from: "(.*)\\.ttl"
    to: "\\g<1>{version}.ttl"
  includes:
    - "*.ttl"
- action: "definedBy"
  message: "Adding rdfs:isDefinedBy."
  source: "{output}"
  target: "{output}"
  includes:
    - "*.ttl"
- action: "transform"
  message: "Turtle serialization."
  tool: "serializer"
  source: "{output}"
  target: "{output}"
  includes:
    - "*.ttl"
  rename:
    from: "(.*)\\.ttl"
    to: "formatted_\\g<1>.ttl"
- action: "move"
  source: "{output}"
  target: "{output}"
  includes:
    - "formatted_*.ttl"
  rename:
    from: "formatted_(.*)\\.ttl"
    to: "\\g<1>.ttl"
- action: "copy"
  message: "Copying examples."
  source: "{input}/examples"
  target: "{output}/examples"
- action: "copy"
  message: "Copying license text."
  source: "LICENSE.txt"
  target: "{output}/LICENSE.txt"
- action: "copy"
  message: "Copying readme."
  source: "README.md"
  target: "{output}/README.md"
- action: "markdown"
  message: "Formatting readme."
  source: "{output}/README.md"
  target: "{output}/README.html"
- action: "transform"
  message: "RDF/XML serialization."
  tool: "xml-serializer"
  source: "{output}"
  target: "{output}"
  rename:
    from: "(.*)\\.ttl"
    to: "\\g<1>.rdf"
  includes:
    - "*.ttl"
- action: "transform"
  message: "JSON-LD serialization."
  tool: "json-serializer"
  source: "{output}"
  target: "{output}"
  rename:
    from: "(.*)\\.ttl"
    to: "\\g<1>.jsonld"
  includes:
    - "*.ttl"
    